<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>选择图书</title>
    <script type="text/javascript">
        var chooseBook = function()
        {
//            打开一个新窗口
            var targetWin = window.open('http://localhost:63342/html5Practice/untitled2/181targetChooseBook.html','_blank','width = 510,height=300');

//            等待窗口装载完成时,向该窗口发送消息
            targetWin.onload = function()
            {
                var data = [
                    {
                        name:'iOS讲义',
                        price:109,
                        author:'yeeeku'
                    },
                    {
                        name:'ios2',
                        price:110,
                        author:'yeeku1'
                    },
                    {
                        name:'ios3',
                        price:111,
                        author:'yeeku2'
                    }

                ];

                targetWin.postMessage(data,"http://localhost:63342/target");
            }

        }

        window.onmessage = function(ev)
        {
            if (ev.origin != "http://localhost:63342")
            {
                return;
            }

            var show = document.getElementById("result");
            show.innerHTML = ("您选择的图书为:<br />" + "书名:" + ev.data.name + "<br />"
                               + "价格:" +ev.data.price + "<br />"
                               + "作者:" +ev.data.author + "<br />");

        };

    </script>
</head>
<body>

<a href="#" onclick="chooseBook();">选择图书</a>
<div id="result"></div>

</body>
</html>